(this.webpackJsonppelis=this.webpackJsonppelis||[]).push([[0],{18:function(e,t,c){},44:function(e,t,c){"use strict";c.r(t);var n=c(2),r=c.n(n),a=c(28),i=c.n(a),o=c(7),s=c(4),j=c(12),l=c(14),d=(c(18),c(1)),b=function(e){var t=e.product;return Object(d.jsx)("div",{className:"Item",children:Object(d.jsx)("article",{children:Object(d.jsxs)(o.b,{to:"/item/".concat(t.id),children:[Object(d.jsx)("h5",{children:t.nombre}),Object(d.jsx)("img",{src:t.img,alt:t.nombre})]})})})},u=c(21);c(45),u.a.initializeApp({apiKey:"AIzaSyCK1MPS7gCsh4vTA34OQeAq9EON9GEMf4k",authDomain:"peliculas-98264.firebaseapp.com",projectId:"peliculas-98264",storageBucket:"peliculas-98264.appspot.com",messagingSenderId:"257217129518",appId:"1:257217129518:web:4d07797fed60d1664d43bf"});var O=u.a.firestore(),h=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),c=t[0],r=t[1],a=Object(s.f)().id;return Object(n.useEffect)((function(){r([]);var e=O.collection("peliculas");a?e.where("categoria","==",a).get().then((function(e){return r(e.docs.map((function(e){return Object(j.a)(Object(j.a)({},e.data()),{},{id:e.id})})))})):e.get().then((function(e){return r(e.docs.map((function(e){return Object(j.a)(Object(j.a)({},e.data()),{},{id:e.id})})))}))}),[a]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"LinkCategoria",children:[Object(d.jsx)(o.b,{to:"/categoria/Accion",children:"Accion"}),Object(d.jsx)(o.b,{to:"/categoria/Aventura",children:"Aventura"}),Object(d.jsx)(o.b,{to:"/categoria/Animacion",children:"Animacion"})]}),Object(d.jsx)("div",{children:c.length?c.map((function(e){return Object(d.jsx)(b,{product:e},e.id)})):Object(d.jsx)("h3",{children:"Cargando..."})})]})},x=c(30),m=Object(n.createContext)(),p=function(e){var t=e.children,c=Object(n.useState)([]),r=Object(l.a)(c,2),a=r[0],i=r[1];console.log(a);var o={cart:a,setCart:i,addItem:function(e){i([].concat(Object(x.a)(a),[e]))},isInCart:function(e){return a.filter((function(t){return t.id===e})).length>0},editCart:function(e){var t=a.map((function(t){return t.id===e.id?e:t}));i(t)},clear:function(){i([])},deleteItem:function(e){var t=a.filter((function(t){return t.id!==e}));i(t)}};return Object(d.jsx)(m.Provider,{value:o,children:t})},f=function(e){var t=e.initial,c=e.stock,n=e.contador,r=e.setContador;return Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{onClick:function(){n>t&&r(n-1)},children:"-"}),Object(d.jsx)("p",{children:n}),Object(d.jsx)("button",{onClick:function(){n<c&&r(n+1)},children:"+"})]})},v=function(e){var t=e.producto,c=Object(n.useContext)(m),r=c.cart,a=c.addItem,i=c.editCart,s=c.isInCart,b=Object(n.useState)(1),u=Object(l.a)(b,2),O=u[0],h=u[1],x=Object(n.useState)(!1),p=Object(l.a)(x,2),v=p[0],g=p[1];console.log(r);return Object(d.jsxs)("div",{children:[Object(d.jsx)("img",{src:t.img,alt:t.nombre}),Object(d.jsxs)("div",{children:[Object(d.jsx)("h5",{children:t.nombre}),Object(d.jsx)("p",{children:t.detalle}),Object(d.jsxs)("p",{children:["Stock Disponible: ",t.stock?t.stock:"No hay stock"]}),v?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{className:"EditarCompra",onClick:function(){return g(!1)},children:"Editar compra"}),Object(d.jsx)("div",{className:"IrAlCarrito",children:Object(d.jsx)(o.b,{to:"/cart",children:"Ir al carrito"})})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(f,{initial:0,stock:t.stock,contador:O,setContador:h}),Object(d.jsx)("button",{className:"AgregarAlCarrito",onClick:function(){g(!0),s(t.id)?i(Object(j.a)(Object(j.a)({},t),{},{cantidad:O})):a(Object(j.a)(Object(j.a)({},t),{},{cantidad:O}))},disabled:0===t.stock,children:"Agregar al carrito"})]})]}),Object(d.jsx)("div",{className:"SeguirComprando",children:Object(d.jsx)(o.b,{to:"/",children:"Seguir comprando"})})]})},g=function(){var e=Object(s.f)().id,t=Object(n.useState)({}),c=Object(l.a)(t,2),r=c[0],a=c[1];return Object(n.useEffect)((function(){a({}),O.collection("peliculas").doc(e).get().then((function(e){a(Object(j.a)(Object(j.a)({},e.data()),{},{id:e.id}))}))}),[e]),Object(d.jsx)(d.Fragment,{children:0!==Object.entries(r).length?Object(d.jsx)(v,{producto:r}):Object(d.jsx)("h2",{children:"Cargando..."})})},C=function(){var e=Object(n.useContext)(m).cart,t=Object(n.useContext)(m).clear;return Object(d.jsxs)("div",{className:"Carrito",children:[Object(d.jsx)("div",{className:"Carrito-Volver",children:Object(d.jsx)(o.b,{to:"/",children:"Volver"})}),Object(d.jsx)("div",{className:"Carrito-Item",children:e.length?e.map((function(e){return Object(d.jsxs)("h2",{children:[e.nombre," "]},e.id)})):null}),Object(d.jsxs)("div",{className:"Carrito-FinalizarCompra",children:[Object(d.jsx)(o.b,{to:"/compra",children:"Finalizar compra"}),Object(d.jsx)(o.b,{to:"/",children:Object(d.jsx)("button",{className:"Carrito-VaciarCarrito",onClick:t,children:"Vaciar Carrito"})})]})]})};function k(){var e=Object(n.useContext)(m).cart;console.log(e);var t=Object(n.useState)(""),c=Object(l.a)(t,2),r=c[0],a=c[1],i=Object(n.useContext)(m).clear;return Object(d.jsxs)("div",{className:"FormularioFinalizarCompra",children:[Object(d.jsx)("h2",{children:"Finalizar compra"}),Object(d.jsxs)("form",{onSubmit:function(t){t.preventDefault();var c=O.collection("ventas"),n=O.collection("peliculas");c.add({productos:e,user:r}).then((function(t){e.map((function(e){var t=e.cantidad;n.doc(e.id).update({stock:u.a.firestore.FieldValue.increment(-t)})})),console.log(t.id),e.length>0?alert("Gracias por su compra ".concat(r)):alert("Carrito vacio"),i()}))},children:[Object(d.jsx)("div",{children:Object(d.jsx)("input",{onChange:function(e){a(e.target.value)},value:r,name:"user",placeholder:"ingrese su nombre",type:"nombre"})}),Object(d.jsx)("button",{disabled:0===r.length,type:"submit",children:"Comprar"})]})]})}var N=function(){return Object(d.jsxs)("div",{className:"NavBar",children:[Object(d.jsx)(o.b,{to:"/",children:"Inicio"}),Object(d.jsx)(o.b,{to:"/Cart",children:"Carrito"})]})},I=function(){return Object(d.jsx)("div",{className:"Footer",children:Object(d.jsx)("h3",{children:"TODO PELIS"})})};function A(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(p,{children:Object(d.jsxs)(o.a,{children:[Object(d.jsx)(N,{exact:!0,path:"/"}),Object(d.jsxs)(s.c,{children:[Object(d.jsx)(s.a,{exact:!0,path:"/",component:h}),Object(d.jsx)(s.a,{path:"/categoria/:id",component:h}),Object(d.jsx)(s.a,{path:"/item/:id",component:g}),Object(d.jsx)(s.a,{path:"/cart",component:C}),Object(d.jsx)(s.a,{path:"/compra",component:k})]}),Object(d.jsx)(I,{})]})})})}i.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(A,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.9aabca56.chunk.js.map